<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
</head>
<body>
<h4>Demo Representation</h4>
<div id="bar" style="width: 600px;height:400px;"></div>
<div id="pie" style="width: 600px;height:400px;"></div>
<p id="demo"></p>
</body>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('bar'));

    // 指定图表的配置项和数据
    var option = {
        dataset: {
            source: [
                ['score', 'amount', 'product'],
                [89.3, 58212, 'Matcha Latte'],
                [57.1, 78254, 'Milk Tea'],
                [74.4, 41032, 'Cheese Cocoa'],
                [50.1, 12755, 'Cheese Brownie'],
                [89.7, 20145, 'Matcha Cocoa'],
                [68.1, 79146, 'Tea'],
                [19.6, 91852, 'Orange Juice'],
                [10.6, 101852, 'Lemon Juice'],
                [32.7, 20112, 'Walnut Brownie']
            ]
        },
        grid: {containLabel: true},
        xAxis: {},
        yAxis: {type: 'category'},
        series: [
            {
                type: 'bar',
                encode: {
                    // 将 "amount" 列映射到 X 轴。
                    x: 'amount',
                    // 将 "product" 列映射到 Y 轴。
                    y: 'product'
                }
            }
        ]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>
<script type="text/javascript">
    var pie_data;
    function Top_developers(top){
        var json_data=[];
        $.ajax( {
            url:'/developer/getDevelopers',
            async: false,
            type:'get',
            data: {},
            datatype : "json",
            success : function(data) {
                for(var i=0; i<top&&i<data.length; i++){
                    var temp={value:null,name:null};
                    temp.name=data[i].name;
                    temp.value=Math.random()*100;
                    json_data.push(temp);
                }
                json_data.push(temp);
            },
            error : function(XMLHttpRequest, textStatus, errorThrown){
                debugger
                // 状态码
                console.log(XMLHttpRequest.status);
                // 状态
                console.log(XMLHttpRequest.readyState);
                // 错误信息
                console.log(textStatus);

            }
        });
        return json_data;
    }
    pie_data=Top_developers(5);


    var myChart = echarts.init(document.getElementById('pie'));

    myChart.setOption({
        series : [
            {
                name: 'Top Contributions',
                type: 'pie',
                radius: '55%',
                data:pie_data
            }
        ]
    })
</script>
</html>